{{ define "main" }}
{{ $tags := .Params.tags }}

{{ $reports := .Site.Taxonomies.categories.report }}
{{ $pages := $reports }}
{{ with $tags }}
  {{ $pages = where $reports ".Params.tags" "intersect" $tags }}
{{ end }}

<div class="container">
  <h1>{{ .Title }}</h1>
  <main class="col">
    {{ range $pages }}
      <div class="row blog-summary">
        <div>
          <a href="{{ .RelPermalink }}" style="margin-bottom: 0">
            <p class="title">{{ .Title }}</p>
          </a>
          {{ if .IsTranslated }}
            <p class="title-translation">Translations: {{ range .Translations }}<a style="display: inline-block;margin-bottom: 0;padding-right: 10px" href="{{ .RelPermalink }}">{{ if eq .Lang "en" }}English{{ else if eq .Lang "pt" }}Portuguese{{ else if eq .Lang "fr" }}French{{ else if eq .Lang "es"  }}Spanish{{ else if eq .Lang "ca"  }}Catalan{{ else }}{{ .Lang }}{{ end }}</a>{{ end }}
            </p>
          {{ else }}
          {{ end }}
          <p class="byline" style="margin-bottom: 0">{{ .Date.Format "2 Jan 2006" }}</p>
        </div>
      </div>
    {{ end }}
  </main>
</div>

{{ end }}
